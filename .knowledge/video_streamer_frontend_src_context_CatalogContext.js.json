{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React context provider for managing a catalog of YouTube videos, including dataset normalization, caching, preflight checks with YouTube oEmbed, persistence, and updating mechanisms. It exposes an API for components to access a ready catalog of videos, replace items with backup options, and refresh the catalog.", "external_files": ["../data/videos", "../data/backupVideos"], "external_methods": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "fetch", "setTimeout", "clearTimeout"], "published": ["CatalogContext"], "classes": [], "methods": [{"name": "normalizeItem(v, idx)", "description": "Normalizes raw video data into a standardized catalog item format, ensuring presence of thumbnail URLs and other metadata.", "scope": "", "scopeKind": ""}, {"name": "readJSON(key)", "description": "Reads and parses a JSON object from localStorage for a given key.", "scope": "", "scopeKind": ""}, {"name": "writeJSON(key, value)", "description": "Serializes and saves a JSON object to localStorage under a specified key.", "scope": "", "scopeKind": ""}, {"name": "readEmbedCache(id)", "description": "Reads a cached result of the YouTube oEmbed preflight check for a specific video ID.", "scope": "", "scopeKind": ""}, {"name": "writeEmbedCache(id, ok)", "description": "Stores the result of a YouTube oEmbed preflight check in localStorage with an expiry.", "scope": "", "scopeKind": ""}, {"name": "preflightOEmbed(id, signal)", "description": "Performs or retrieves from cache a preflight check to determine if a YouTube video is embeddable.", "scope": "", "scopeKind": ""}, {"name": "readSavedCatalog()", "description": "Reads the saved catalog from localStorage if valid and not expired.", "scope": "", "scopeKind": ""}, {"name": "persistCatalog(items)", "description": "Persists the current catalog of videos to localStorage with an expiry.", "scope": "", "scopeKind": ""}, {"name": "CatalogProvider({ children })", "description": "React context provider component that manages the catalog state, including building, verifying, repairing, and updating the catalog.", "scope": "", "scopeKind": ""}, {"name": "replaceWithBackup", "description": "Replaces a video item in the catalog with a backup or primary alternative that passes the oEmbed check."}, {"name": "refreshCatalog", "description": "Clears the saved catalog and triggers a rebuild."}, {"name": "findReplacement()", "scope": "CatalogProvider", "scopeKind": "function", "description": "unavailable"}], "calls": ["fetch", "setTimeout", "clearTimeout", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "search-terms": ["CatalogContext", "Video Dataset", "oEmbed preflight", "YouTube videos", "React context", "video catalog management", "backup videos", "localStorage caching"], "state": 2, "file_id": 24, "knowledge_revision": 119, "git_revision": "", "ctags": [{"_type": "tag", "name": "CatalogContext", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^export const CatalogContext = createContext({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CatalogProvider", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^export function CatalogProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "findReplacement", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^    async function findReplacement() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "CatalogProvider", "scopeKind": "function"}, {"_type": "tag", "name": "normalizeItem", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function normalizeItem(v, idx) {$/", "language": "JavaScript", "kind": "function", "signature": "(v, idx)"}, {"_type": "tag", "name": "persistCatalog", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function persistCatalog(items) {$/", "language": "JavaScript", "kind": "function", "signature": "(items)"}, {"_type": "tag", "name": "preflightOEmbed", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^async function preflightOEmbed(id, signal) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, signal)"}, {"_type": "tag", "name": "readEmbedCache", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readEmbedCache(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "readJSON", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readJSON(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "readSavedCatalog", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readSavedCatalog() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  return <CatalogContext.Provider value={value}>{children}<\\/CatalogContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "writeEmbedCache", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function writeEmbedCache(id, ok) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, ok)"}, {"_type": "tag", "name": "writeJSON", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function writeJSON(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}], "hash": "df143e5a53281b667e7007c25006fb3e", "format-version": 4, "code-base-name": "video_streamer_frontend", "filename": "video_streamer_frontend/src/context/CatalogContext.js", "fields": [{"name": "return <CatalogContext.Provider value={value}>{children}<\\/CatalogContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"119": ""}]}