{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React context provider for managing a curated catalog of YouTube, Vimeo, and MP4 videos, including normalization, caching, preflight checks, backup handling, catalog persistence, and APIs for catalog manipulation.", "external_files": ["../data/videos", "../data/backupVideos", "../data/playlists"], "external_methods": ["fetch"], "published": ["CatalogContext"], "classes": [], "methods": [{"name": "normalizeItem(v, idx)", "description": "Normalizes raw YouTube dataset items into the catalog item format, ensuring backward compatibility and setting default values.", "scope": "", "scopeKind": ""}, {"name": "normalizeVimeoItem(v, idx)", "description": "Normalizes raw Vimeo dataset items into the catalog item format.", "scope": "", "scopeKind": ""}, {"name": "normalizeMp4Item(v, idx)", "description": "Normalizes raw MP4 public clip dataset items into the catalog item format.", "scope": "", "scopeKind": ""}, {"name": "preflightOEmbed(id, externalSignal)", "description": "Performs an oEmbed preflight check for a YouTube ID with timeout, returning true, false, or 'u' (unknown).", "scope": "", "scopeKind": ""}, {"name": "preflightVimeoOEmbed(id, externalSignal)", "description": "Performs an oEmbed preflight check for a Vimeo ID with timeout, returning true, false, or 'u'.", "scope": "", "scopeKind": ""}, {"name": "CatalogProvider({ children })", "description": "React component providing catalog data via context, managing state, normalization, preflight checks, backup replacement, and persistence.", "scope": "", "scopeKind": ""}, {"name": "dlog(...args)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "findReplacement()", "scope": "CatalogProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "persistCatalog(items)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readEmbedCache(id)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readJSON(key)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readSavedCatalog()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readSavedTop7()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readVimeoEmbedCache(id)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeEmbedCache(id, ok)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeJSON(key, value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeVimeoEmbedCache(id, ok)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "JSON.parse", "JSON.stringify", "setTimeout", "clearTimeout", "setVideos", "setMixedVideos", "setCounts", "setReady", "setPlaylists", "setPlaylistsMap", "buildFinal", "verifyAndRepair"], "search-terms": ["CatalogContext", "normalizeItem", "preflightOEmbed", "backupVideos", "vimeo", "cache", "oEmbed", "VideoStream", "React Context", "videos", "playlist", "persistCatalog", "replaceWithBackup", "refreshCatalog"], "state": 2, "file_id": 24, "knowledge_revision": 163, "git_revision": "f95b792adc692e89ca1e0af3964befd9f4e4710a", "revision_history": [{"119": ""}, {"128": "d42cd53beb8901b440762ea89a84cfda363f4028"}, {"138": "cc76299156655c4771285f27c036d5c6dc6fc5f3"}, {"144": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"145": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"146": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"147": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"148": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"149": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"150": "f728d5ef1f800379fbf39fcc9332ab4b438b93b6"}, {"163": "f95b792adc692e89ca1e0af3964befd9f4e4710a"}], "ctags": [{"_type": "tag", "name": "CatalogContext", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^export const CatalogContext = createContext({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CatalogProvider", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^export function CatalogProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "DEBUG", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^const DEBUG =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "KEYS", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^const KEYS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_VERSION", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^const STORAGE_VERSION = 'v2';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "catalogFinalV1", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  catalogFinalV1: 'sv:catalog:final', \\/\\/ legacy (read-only fallback)$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "catalogFinalV2", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  catalogFinalV2: `sv:catalog:final:${STORAGE_VERSION}`,$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "catalogTop7V1", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  catalogTop7V1: 'sv:catalog:top7',   \\/\\/ legacy (read-only fallback)$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "catalogTop7V2", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  catalogTop7V2: `sv:catalog:top7:${STORAGE_VERSION}`,$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "dlog", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function dlog(...args) {$/", "language": "JavaScript", "kind": "function", "signature": "(...args)"}, {"_type": "tag", "name": "findReplacement", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^    async function findReplacement() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "CatalogProvider", "scopeKind": "function"}, {"_type": "tag", "name": "normalizeItem", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function normalizeItem(v, idx) {$/", "language": "JavaScript", "kind": "function", "signature": "(v, idx)"}, {"_type": "tag", "name": "normalizeMp4Item", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function normalizeMp4Item(v, idx) {$/", "language": "JavaScript", "kind": "function", "signature": "(v, idx)"}, {"_type": "tag", "name": "normalizeVimeoItem", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function normalizeVimeoItem(v, idx) {$/", "language": "JavaScript", "kind": "function", "signature": "(v, idx)"}, {"_type": "tag", "name": "oembedV1", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  oembedV1: (id) => `sv:oembed:${id}`, \\/\\/ legacy (read-only fallback)$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "oembedV2", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  oembedV2: (id) => `sv:oembed:${id}:${STORAGE_VERSION}`,$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "persistCatalog", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function persistCatalog(items) {$/", "language": "JavaScript", "kind": "function", "signature": "(items)"}, {"_type": "tag", "name": "preflightOEmbed", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^async function preflightOEmbed(id, externalSignal) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, externalSignal)"}, {"_type": "tag", "name": "preflightVimeoOEmbed", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^async function preflightVimeoOEmbed(id, externalSignal) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, externalSignal)"}, {"_type": "tag", "name": "readEmbedCache", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readEmbedCache(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "readJSON", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readJSON(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "readSavedCatalog", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readSavedCatalog() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "readSavedTop7", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readSavedTop7() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "readVimeoEmbedCache", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function readVimeoEmbedCache(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "thumbFail", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  thumbFail: (id) => `sv:thumbfail:${id}`,$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  return <CatalogContext.Provider value={value}>{children}<\\/CatalogContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "vimeoOEmbedV2", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^  vimeoOEmbedV2: (id) => `sv:oembed:vimeo:${id}:${STORAGE_VERSION}`,$/", "language": "JavaScript", "kind": "property", "scope": "KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "writeEmbedCache", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function writeEmbedCache(id, ok) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, ok)"}, {"_type": "tag", "name": "writeJSON", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function writeJSON(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}, {"_type": "tag", "name": "writeVimeoEmbedCache", "path": "/home/kavia/workspace/code-generation/streamview-221852-221861/video_streamer_frontend/src/context/CatalogContext.js", "pattern": "/^function writeVimeoEmbedCache(id, ok) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, ok)"}], "hash": "1508e2bfc1952cd9d045f34ade62b09b", "format-version": 4, "code-base-name": "video_streamer_frontend", "filename": "video_streamer_frontend/src/context/CatalogContext.js", "fields": [{"name": "catalogFinalV1: 'sv:catalog:final', \\/\\/ legacy (read-only fallback)", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "catalogFinalV2: `sv:catalog:final:${STORAGE_VERSION}`,", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "catalogTop7V1: 'sv:catalog:top7',   \\/\\/ legacy (read-only fallback)", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "catalogTop7V2: `sv:catalog:top7:${STORAGE_VERSION}`,", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "oembedV1: (id) => `sv:oembed:${id}`, \\/\\/ legacy (read-only fallback)", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "oembedV2: (id) => `sv:oembed:${id}:${STORAGE_VERSION}`,", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "thumbFail: (id) => `sv:thumbfail:${id}`,", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "return <CatalogContext.Provider value={value}>{children}<\\/CatalogContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}, {"name": "vimeoOEmbedV2: (id) => `sv:oembed:vimeo:${id}:${STORAGE_VERSION}`,", "scope": "KEYS", "scopeKind": "class", "description": "unavailable"}]}